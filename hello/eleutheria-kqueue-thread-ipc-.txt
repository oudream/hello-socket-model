from:
https://wiki.netbsd.org/tutorials/kqueue_tutorial/
https://repo.or.cz/w/eleutheria.git?a=tree;h=master;hb=master